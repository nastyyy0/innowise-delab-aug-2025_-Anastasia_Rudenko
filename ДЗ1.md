Управление арендной недвижимостью

**Сущности:**

- Арендодатель;
- Объект недвижимости;
- Арендатор;
- Договор;
- Платеж;
- Недвижимость-арендатор.

**Проектирование таблиц:**

**1\. Таблица «Арендодатель»:**

**Описание**: Хранит информацию о арендодателях.

**Атрибуты:**

id_арендодателя: INTEGER, PK, NOT NULL, UNIQUE,

фамилия: VARCHAR(30), NOT NULL,

имя: VARCHAR(30), NOT NULL,

отчество: VARCHAR(30), NULL,

идентификационный номер: VARCHAR(30), NOT NULL, UNIQUE,

номер телефона: VARCHAR(13), NOT NULL, UNIQUE.

Ограничения:

PK_Арендодатель: PRIMARY KEY (id_арендодателя),

UQ_Личные данные арендодателя: UNIQUE (идентификационный номер, номер телефона).

**2\. Таблица «Объект недвижимости»:**

**Описание**: Хранит информацию о объектах недвижимости.

**Атрибуты:**

id_недвижимости: INTEGER, PK, NOT NULL, UNIQUE,

тип: VARCHAR(30), NOT NULL,

адрес: VARCHAR(100), NOT NULL,

описание: TEXT, NULL,

id_арендодателя: INTEGER, FK (REFERENCES Арендодатель), NOT NULL.

**Ограничения:**

PK_Объект недвижимости: PRIMARY KEY (id_недвижимости),

CHK_тип: CHECK (тип = “жилая” OR тип = “нежилая” OR тип = “коммерческая”),

FK_Объект недвижимости_Арендодатель: FOREIGN KEY (id_арендодателя) REFERENCES Арендодатель (id_арендодателя).

**3\. Таблица «Арендатор»:**

**Описание**: Хранит информацию о арендаторе.

**Атрибуты:**

id_арендатора: INTEGER, PK, NOT NULL, UNIQUE,

фамилия: VARCHAR(30), NOT NULL,

имя: VARCHAR(30), NOT NULL,

отчество: VARCHAR(30), NULL,

идентификационный номер: VARCHAR(30), NOT NULL, UNIQUE,

номер телефона: VARCHAR(13), NOT NULL, UNIQUE.

Ограничения:

PK_Арендатор: PRIMARY KEY (id_арендатора),

UQ_Личные данные арендатора: UNIQUE (идентификационный номер, номер телефона).

**4\. Таблица «Договор»:**

**Описание**: Хранить информацию о заключенных договорах.

**Атрибуты**:

id_договора: INTEGER, PK, NOT NULL, UNIQUE,

дата заключения: DATE, NOT NULL,

условия: TEXT, NOT NULL,

дата окончания: DATE, NOT NULL,

сумма договора: NUMERIC, NOT NULL,

FK_Договор_Арендодатель: FOREIGN KEY (id_арендодателя) REFERENCES Арендодатель (id_арендодателя).

FK_Договор_Арендатор: FOREIGN KEY (id_арендатора) REFERENCES Арендатор (id_арендатора).

FK_Договор_Объект недвижимости: FOREIGN KEY (id_недвижимости) REFERENCES Объект недвижимости (id_недвижимости).

**Ограничения:**

PK_Договор: PRIMARY KEY (id_договора),

CHK_даты: дата окончания IS NULL OR дата окончания > дата заключения,

CHK_сумма договора: CHECK (сумма договора > 0).

**5\. Таблица «Платеж»:**

**Описание**: хранит информацию о оплате аренды недвижимости.

**Атрибуты:**

id_платежа: INTEGER, PK, NOT NULL, UNIQUE,

дата оплаты: DATE, NOT NULL,

сумма: NUMERIC, NOT NULL,

FK_Платеж_Договор: FOREIGN KEY (id_договора) REFERENCES Договор (id_договора).

**Ограничения:**

PK_Платеж: PRIMARY KEY (id_платежа),

CHK_сумма: CHECK (сумма > 0).

**6\. Таблица «Арендатор-Недвижимость»:**

**Описание**: связующая таблица для таблиц «Арендатор» и «Недвижимость».

**Атрибуты:**

id_Арендатор-Недвижимость: INTEGER, PK, NOT NULL, UNIQUE,

FK_Арендатор-Недвижимость_Арендатор: FOREIGN KEY (id_арендатора) REFERENCES Арендатор (id_арендатора)

FK_Арендатор-Недвижимость_Недвижимость: FOREIGN KEY (id_недвижимости) REFERENCES Объект недвижимости (id_недвижимости)

**Ограничения:**

PK_Арендатор-Недвижимость: PRIMARY KEY (id_Арендатор-Недвижимость).

**Взаимосвязи:**

**Арендодатель — Объект Недвижимости** (1 - М): один арендодатель может сдавать один или несколько объектов недвижимости, один объект недвижимости сдается только одним арендодателем. Внешний ключ (id_арендодателя) в таблице «Объект недвижимости».

**Арендатор — Объект недвижимости** (М - М): один арендатор может арендовать несколько объектов недвижимости, один объект недвижимости может сниматься одним или несколькими арендаторами. Необходима связующая таблица. Создается таблица «Арендатор-недвижимость».

**Арендатор — Арендатор-недвижимость** (1-М): один арендатор может иметь несколько записей в таблице «Арендатор-недвижимость» (при аренде сразу нескольких объектов), ожна запись в таблице может относиться только к одному арендатору. Внешний ключ (id_арендатора) в связующей таблице.

**Объект недвижимости — Арендатор-недвижимость** (1-М): один объект недвижимости может быть указан в нескольких записях в таблице «Арендатор-недвижимость» (при совместной аренде несколькими людьми), одна конкретная запись относится к одному объекту недвижимости. Внешний ключ (id_недвижимости) в связующей таблице.

**Арендатор — договор** (1-М): один арендатор может заключить несколько договоров, один договор содержит только одного арендатора (при совместном съеме указывается только один (главный) арендатор, который несет ответственность за остальных). Внешний ключ (id_арендатора) в таблице «Договор».

**Объект недвижимости — договор** (1-М): для одного объекта недвижимости может заключаться несколько договоров (в случае сдачи частей недвижимости разным людям, либо сдача в разные периоды), один договор относится только к одному объекту недвижимости. Внешний ключ (id_недвижимости) в таблице «Договор».

**Договор — платеж** (1-М): один договор может иметь несколько платежей, один конкретный платеж относится к одному договору. Внешний ключ (id_договора) в таблице «Платеж».